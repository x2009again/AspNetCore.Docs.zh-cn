<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Azure &#24212;&#29992;&#26381;&#21153;&#21644; IIS &#19978; ASP.NET Core &#30340;&#24120;&#35265;&#38169;&#35823;&#21442;&#32771; </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Azure &#24212;&#29992;&#26381;&#21153;&#21644; IIS &#19978; ASP.NET Core &#30340;&#24120;&#35265;&#38169;&#35823;&#21442;&#32771; ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="host-and-deploy/azure-iis-errors-reference">
<h1 id="common-errors-reference-for-azure-app-service-and-iis-with-aspnet-core">Azure 应用服务和 IIS 上 ASP.NET Core 的常见错误参考</h1>

<div range="&gt;= aspnetcore-2.2">
<p>本主题描述在 Azure 应用服务和 IIS 上托管 ASP.NET Core 应用时的常见错误，并提供特定错误的故障排除建议。</p>
<p>有关一般故障排除指南，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
<p>收集以下信息：</p>
<ul>
<li>浏览器行为（状态代码和错误消息）</li>
<li>应用程序事件日志条目
<ul>
<li>Azure 应用服务：请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</li>
<li>IIS
<ol>
<li>选择 Windows 菜单中的“开始”，键入“事件查看器”，然后按 Enter 。</li>
<li>打开事件查看器后，展开侧栏中的“Windows 日志”&gt;“应用程序”  。</li>
</ol>
</li>
</ul>
</li>
<li>ASP.NET Core 模块 stdout 和 debug日志条目
<ul>
<li>Azure 应用服务：请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</li>
<li>IIS：按照 ASP.NET Core 模块主题的<a class="xref" href="aspnet-core-module.html#log-creation-and-redirection">日志创建和重定向</a>和<a class="xref" href="aspnet-core-module.html#enhanced-diagnostic-logs">增强的诊断日志</a>部分中的说明进行操作。</li>
</ul>
</li>
</ul>
<p>将错误信息与以下常见错误进行比较。 如果找到匹配项，请按照故障排除建议进行操作。</p>
<p>本主题中的错误列表并未包含所有错误。 如果遇到此处未列出的错误，请使用本主题底部的“内容反馈”按钮打开一个新问题，并提供有关如何重现错误的详细说明。</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p><strong>Azure 应用服务中的 ASP.NET Core 预览版</strong></p>
<p>默认情况下不会将 ASP.NET Core 预览版部署到 Azure 应用服务。 要托管使用 ASP.NET Core 预览版的应用，请参阅<a class="xref" href="azure-apps/index.html#deploy-aspnet-core-preview-release-to-azure-app-service">将 ASP.NET Core 预览版部署到 Azure 应用服务</a>。</p>
</div>
<!-- 
> [!IMPORTANT]
> **ASP.NET Core 3.0 with Azure App Service**
>
> ASP.NET Core 3.0 has not yet been deployed to Azure App Service. We hope to provide ASP.NET Core 3 on Azure App Service soon. To host an app that uses an ASP.NET Core 3.0:

* Treat ASP.NET Core 3.0 like a preview release for Azure App Service deployment.
* See [Deploy ASP.NET Core preview release to Azure App Service](xref:host-and-deploy/azure-apps/index#deploy-aspnet-core-preview-release-to-azure-app-service).
-->
<h2 id="os-upgrade-removed-the-32-bit-aspnet-core-module">OS 升级删除了 32 位 ASP.NET Core 模块</h2>
<p><strong>应用程序日志：</strong> 未能加载模块 DLL C:\WINDOWS\system32\inetsrv\aspnetcore.dll。 该数据是个错误。</p>
<p>疑难解答：</p>
<p>OS 升级期间不会保留 C:\Windows\SysWOW64\inetsrv 目录中的非 OS 文件。 如果在 OS 升级前已安装 ASP.NET Core 模块，且随后在 OS 升级后在 32 位模式下运行任何应用池，则会遇到此问题。 在 OS 升级后修复 ASP.NET Core 模块。 请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。 运行安装程序时，选择“修复”。</p>
<h2 id="missing-site-extension-32-bit-x86-and-64-bit-x64-site-extensions-installed-or-wrong-process-bitness-set">缺少站点扩展、安装了 32 位 (x86) 和 64 位 (x64) 站点扩展，或设置了错误的进程位数</h2>
<p>适用于 Azure 应用服务托管的应用。</p>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 找不到进程内请求处理程序。 调用 hostfxr 捕获的输出：无法找到任何兼容的框架版本。 找不到指定的框架“Microsoft.AspNetCore.App”、版本“{VERSION}-preview-*”。 未能启动应用程序“/LM/W3SVC/1416782824/ROOT”，ErrorCode“0x8000ffff”。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 无法找到任何兼容的框架版本。 找不到指定的框架“Microsoft.AspNetCore.App”、版本“{VERSION}-preview-*”。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 这很可能意味着应用配置错误，请检查 Microsoft.NetCore.App 和 Microsoft.AspNetCore.App 版本是否针对该应用程序并安装在计算机上。 返回失败的 HRESULT：0x8000ffff。 找不到进程内请求处理程序。 无法找到任何兼容的框架版本。 找不到指定的框架“Microsoft.AspNetCore.App”、版本“{VERSION}-preview-*”。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>如果在预览运行时运行该应用，请安装 32 位 (x86) 或  64位 (x64) 站点扩展，以匹配应用的位数和应用的运行时版本。 请勿同时安装扩展或扩展的多个运行时版本。</p>
<ul>
<li>ASP.NET Core {RUNTIME VERSION} (x86) 运行时</li>
<li>ASP.NET Core {RUNTIME VERSION} (x64) 运行时</li>
</ul>
<p>重新启动应用。 等待几秒钟，以便应用重新启动。</p>
</li>
<li><p>如果在预览运行时运行应用，且同时安装了 32 位 (x86) 和 64 位 (x64) <a class="xref" href="azure-apps/index.html#install-the-preview-site-extension">站点扩展</a>，请卸载与应用的位数不匹配的站点扩展。 删除站点扩展之后，重新启动应用。 等待几秒钟，以便应用重新启动。</p>
</li>
<li><p>如果在预览运行时运行该应用，并且站点扩展的位数匹配应用的位数，请确认预览站点扩展的运行时版本匹配应用的运行时版本。</p>
</li>
<li><p>确认“应用程序设置”中的应用“平台”与应用的位数匹配。</p>
</li>
</ul>
<p>有关详细信息，请参阅 <a class="xref" href="azure-apps/index.html#install-the-preview-site-extension">将 ASP.NET Core 应用部署到 Azure 应用服务</a>。</p>
<h2 id="an-x86-app-is-deployed-but-the-app-pool-isnt-enabled-for-32-bit-apps">已部署 x86 应用，但 32 位应用未启用应用池</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.30 - ANCM 进程内启动失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 '{PATH}' 的应用程序 '/LM/W3SVC/5/ROOT' 遇到意外的托管异常，异常代码= '0xe0434352'。 请检查 stderr 日志以获取详细信息。 物理根路径为 '{PATH}' 的应用程序 '/LM/W3SVC/5/ROOT' 未能加载 clr 和托管应用程序。 CLR 工作线程提前退出</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 日志文件已创建，但为空。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 返回失败的 HRESULT：0x8007023e</p>
</li>
</ul>
<p>发布自包含应用时，SDK 会捕获此方案。 如果 RID 与平台目标（例如，<code>win10-x64</code> RID 与项目文件中的 <code>&lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;</code>）不匹配，则 SDK 会产生错误。</p>
<p>疑难解答：</p>
<p>对于依赖 x86 框架的部署 (<code>&lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;</code>)，请为 32 位应用启用 IIS 应用池。 在 IIS 管理器中，打开应用池的“高级设置”并将“启用 32 位应用程序”设置为 True  。</p>
<h2 id="platform-conflicts-with-rid">平台与 RID 冲突</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 502.5 - 进程失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 未能通过 '&quot;C:{PATH}{ASSEMBLY}.{exe|dll}&quot; ' 命令行启动进程，ErrorCode = '0x80004005 : ff。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未经处理的异常：System.BadImageFormatException：无法加载文件或程序集 '{ASSEMBLY}.dll'。 试图加载的程序的格式不正确。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>如果在升级应用和部署更新的程序集时，Azure 应用部署出现此异常，请从先前的部署中手动删除所有文件。 部署升级的应用时，延迟的不兼容程序集可能造成 <code>System.BadImageFormatException</code> 异常。</p>
</li>
</ul>
<h2 id="uri-endpoint-wrong-or-stopped-website">URI 终结点错误或网站已停止</h2>
<ul>
<li><p><strong>浏览器：</strong> ERR_CONNECTION_REFUSED --或者-- 无法连接</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认正在使用的应用的 URI 端点是否正确。 检查绑定。</p>
</li>
<li><p>确认 IIS 网站未处于“已停止”状态。</p>
</li>
</ul>
<h2 id="corewebengine-or-w3svc-server-features-disabled">已禁用 CoreWebEngine 或 W3SVC 服务器功能</h2>
<p><strong>OS 异常：</strong> 必须安装 IIS 7.0 CoreWebEngine 和 W3SVC 功能才能使用 ASP.NET Core 模块。</p>
<p>疑难解答：</p>
<p>确认启用了适当的角色和功能。 请参阅 <a class="xref" href="iis/index.html#iis-configuration">IIS 配置</a>。</p>
<h2 id="incorrect-website-physical-path-or-app-missing">网站物理路径不正确或缺少应用</h2>
<ul>
<li><p><strong>浏览器：</strong> 403 禁止访问 - 访问被拒绝 --或者-- 403.14 禁止访问 - Web 服务器被配置为不列出此目录的内容。</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>检查 IIS 网站的“基本设置”和物理应用文件夹。 确认应用所在的文件夹位于 IIS 网站的物理路径中。</p>
<h2 id="incorrect-role-aspnet-core-module-not-installed-or-incorrect-permissions">角色不正确、未安装 ASP.NET Core 模块或权限不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> 500.19 内部服务器错误 - 无法访问请求的页面，因为该页面的相关配置数据无效。 --或者-- 无法显示此页面</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认启用了适当的角色。 请参阅 <a class="xref" href="iis/index.html#iis-configuration">IIS 配置</a>。</p>
</li>
<li><p>打开“程序和功能”或“应用和功能”，然后确认是否安装了 Windows Server Hosting  。 如果已安装的程序列表中没有 Windows Server Hosting，请下载并安装 .NET Core 托管捆绑包。</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer">当前 .NET Core 托管捆绑包安装程序（直接下载）</a></p>
<p>有关详细信息，请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。</p>
</li>
<li><p>请确保将“应用程序池”&gt;“进程模型”&gt;“Identity”设置为“ApplicationPoolIdentity”，或确保自定义标识具有访问应用部署文件夹的相应权限   。</p>
</li>
<li><p>如果卸载了 ASP.NET Core 托管捆绑包并已安装了一个早期版本的托管捆绑包，则 applicationHost.config 文件将不包含 ASP.NET Core 模块分区。 可打开 %windir%/System32/inetsrv/config 处的 applicationHost.config 文件并找到 <code>&lt;configuration&gt;&lt;configSections&gt;&lt;sectionGroup name=&quot;system.webServer&quot;&gt;</code> 分区组 。 如果分区组中缺少 ASP.NET Core 模块分区，请添加以下分区元素：</p>
<pre><code class="lang-xml">&lt;section name=&quot;aspNetCore&quot; overrideModeDefault=&quot;Allow&quot; /&gt;
</code></pre>
<p>或者，安装最新版本的 ASP.NET Core 托管捆绑包。 最新版本与受支持的 ASP.NET Core 应用向后兼容。</p>
</li>
</ul>
<h2 id="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation">processPath 不正确、缺少 PATH 变量、未安装托管捆绑包、未重启系统/IIS、未安装 VC++ Redistributable 或 dotnet.exe 访问冲突</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 未能通过 '&quot;{...}&quot; ' 命令行启动进程 ，ErrorCode = '0x80070002 :0。 应用程序 '{PATH}' 无法启动。 '{PATH}' 中未找到可执行文件。 未能启动应用程序 '/LM/W3SVC/2/ROOT'，ErrorCode '0x8007023e'。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 事件日志：应用程序 '{PATH}' 无法启动。 '{PATH}' 中未找到可执行文件。 返回失败的 HRESULT：0x8007023e</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>检查 web.config 中 <code>&lt;aspNetCore&gt;</code> 元素的 processPath 属性，对于依赖框架的部署 (FDD)，确保它为 <code>dotnet</code>，对于<a href="/dotnet/core/deploying/#self-contained-deployments-scd">独立部署 (SCD)</a>，确保它为 <code>.\{ASSEMBLY}.exe</code> 。</p>
</li>
<li><p>对于 FDD，可能无法通过路径设置访问 dotnet.exe。 确认“系统路径”设置中存在“C:\Program Files\dotnet”\。</p>
</li>
<li><p>对于 FDD，应用池的用户标识可能无法访问 dotnet.exe。 确认应用池用户标识具有访问 C:\Program Files\dotnet 目录的权限。 确认没有为应用池用户标识配置针对 C:\Program Files\dotnet 和应用目录的拒绝规则。</p>
</li>
<li><p>可能已部署 FDD 并安装了 .NET Core，但未重启 IIS。 重启服务器，或通过从命令提示符依次执行 net stop was /y 和 net start w3svc 来重启 IIS 。</p>
</li>
<li><p>可能已部署 FDD，但未在托管系统上安装 .NET Core 运行时。 如果尚未安装 .NET Core 运行时，则运行系统上的 <strong>.NET Core 托管捆绑包安装程序</strong>。</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer">当前 .NET Core 托管捆绑包安装程序（直接下载）</a></p>
<p>有关详细信息，请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。</p>
<p>如果需要特定的运行时，请从 <a href="https://dotnet.microsoft.com/download/archives">.NET 下载存档</a>下载运行时并将其安装在系统上。 重启系统，或通过从命令提示符依次执行 net stop was /y 和 net start w3svc 来重启 IIS，完成安装 。</p>
</li>
</ul>
<h2 id="incorrect-arguments-of-aspnetcore-element">&lt;aspNetCore&gt; 元素的参数不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 这很可能意味着应用配置错误，请检查 Microsoft.NetCore.App 和 Microsoft.AspNetCore.App 版本是否针对该应用程序并安装在计算机上。 找不到进程内请求处理程序。 调用 hostfxr 捕获的输出：是否希望运行 dotnet SDK 命令？ 请从以下位置安装 dotnet SDK： <a href="https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409">https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409</a> 未能启动应用程序 '/LM/W3SVC/3/ROOT'，ErrorCode '0x8000ffff'。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 是否希望运行 dotnet SDK 命令？ 请从以下位置安装 dotnet SDK： <a href="https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409">https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409</a></p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 这很可能意味着应用配置错误，请检查 Microsoft.NetCore.App 和 Microsoft.AspNetCore.App 版本是否针对该应用程序并安装在计算机上。 返回失败的 HRESULT：0x8000ffff 找不到进程内请求处理程序。 调用 hostfxr 捕获的输出：是否希望运行 dotnet SDK 命令？ 请从以下位置安装 dotnet SDK： <a href="https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409">https://go.microsoft.com/fwlink/?LinkID=798306&amp;clcid=0x409</a> 返回失败的 HRESULT：0x8000ffff</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>检查 web.config 中 <code>&lt;aspNetCore&gt;</code> 元素的 arguments 属性，确认该属性：(a) 对于依赖框架的部署 (FDD) 为 <code>.\{ASSEMBLY}.dll</code>；或 (b) 对于独立部署 (SCD)，则为不存在、为空字符串 (<code>arguments=&quot;&quot;</code>)，或为应用参数列表 (<code>arguments=&quot;{ARGUMENT_1}, {ARGUMENT_2}, ... {ARGUMENT_X}&quot;</code>) 。</p>
</li>
</ul>
<h2 id="missing-net-core-shared-framework">缺少 .NET Core 共享框架</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 这很可能意味着应用配置错误，请检查 Microsoft.NetCore.App 和 Microsoft.AspNetCore.App 版本是否针对该应用程序并安装在计算机上。 找不到进程内请求处理程序。 调用 hostfxr 捕获的输出：无法找到任何兼容的框架版本。 找不到指定的框架 'Microsoft.AspNetCore.App'、版本 '{VERSION}'。</p>
</li>
</ul>
<p>未能启动应用程序 '/LM/W3SVC/5/ROOT'，ErrorCode '0x8000ffff'。</p>
<ul>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 无法找到任何兼容的框架版本。 找不到指定的框架 'Microsoft.AspNetCore.App'、版本 '{VERSION}'。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 返回失败的 HRESULT：0x8000ffff</p>
</li>
</ul>
<p>疑难解答：</p>
<p>对于依赖框架的部署 (FDD)，确认已在系统上安装正确的运行时。</p>
<h2 id="stopped-application-pool">应用程序池已停止</h2>
<ul>
<li><p><strong>浏览器：</strong> 503 服务不可用</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>确认应用程序池未处于“已停止”状态。</p>
<h2 id="sub-application-includes-a-handlers-section">子应用程序包括 &lt;handlers&gt; 部分</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.19 - 内部服务器错误</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 创建根应用的日志文件并显示正常操作。 未创建子应用的日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 创建根应用的日志文件并显示正常操作。 未创建子应用的日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>确认子应用的 web.config 文件不包含 <code>&lt;handlers&gt;</code> 部分，或者子应用未继承父级应用的处理程序。</p>
<p>父级应用的 web.config 的<code>&lt;system.webServer&gt;</code> 放在 <code>&lt;location&gt;</code> 元素内。 将 &lt;xref:System.Configuration.SectionInformation.InheritInChildApplications*&gt; 属性设置为 <code>false</code>，表示 <a href="/iis/manage/managing-your-configuration-settings/understanding-iis-configuration-delegation#the-concept-of-location">&lt;location&gt;</a> 元素中指定的设置不会由驻留在父级应用子目录中的应用继承。 有关详细信息，请参阅 <a class="xref" href="aspnet-core-module.html">ASP.NET Core 模块</a>。</p>
<h2 id="stdout-log-path-incorrect">stdout 日志路径不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> 应用正常响应。</p>
</li>
<li><p><strong>应用程序日志：</strong> 无法在 C:\Program Files\IIS\Asp.Net Core Module\V2\aspnetcorev2.dll 中启动 stdout 重定向。 异常消息：在 {PATH}\aspnetcoremodulev2\commonlib\fileoutputmanager.cpp:84 返回了 HRESULT 0x80070005。 无法在 C:\Program Files\IIS\Asp.Net Core Module\V2\aspnetcorev2.dll 中停止 stdout 重定向。 异常消息：在 {PATH} 返回了 HRESULT 0x80070002。 无法在 {PATH}\aspnetcorev2_inprocess.dll 中启动 stdout 重定向。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 无法在 C:\Program Files\IIS\Asp.Net Core Module\V2\aspnetcorev2.dll 中启动 stdout 重定向。 异常消息：在 {PATH}\aspnetcoremodulev2\commonlib\fileoutputmanager.cpp:84 返回了 HRESULT 0x80070005。 无法在 C:\Program Files\IIS\Asp.Net Core Module\V2\aspnetcorev2.dll 中停止 stdout 重定向。 异常消息：在 {PATH} 返回了 HRESULT 0x80070002。 无法在 {PATH}\aspnetcorev2_inprocess.dll 中启动 stdout 重定向。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>web.config 的 <code>&lt;aspNetCore&gt;</code> 元素中指定的 <code>stdoutLogFile</code> 路径不存在。 有关详细信息，请参阅 <a class="xref" href="aspnet-core-module.html#log-creation-and-redirection">ASP.NET Core 模块：日志创建和重定向</a>。</p>
</li>
<li><p>应用池用户没有 stdout 日志路径的写入权限。</p>
</li>
</ul>
<h2 id="application-configuration-general-issue">应用程序配置常见问题</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败 --或者-- HTTP 错误 500.30 - ANCM 进程内启动失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 变量</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 日志文件已创建，但为空或使用常规条目创建，直到应用失败。</p>
</li>
<li><p><strong>ASP.NET Core 模块调试日志：</strong> 变量</p>
</li>
</ul>
<p>疑难解答：</p>
<p>此进程无法启动，这很可能是由应用配置或编程问题引起的。</p>
<p>有关详细信息，请参阅下列主题：</p>
<ul>
<li><a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a></li>
<li><a class="xref" href="../test/troubleshoot.html">ASP.NET Core 项目故障排除和调试</a></li>
</ul>
</div>
<div range="&lt; aspnetcore-2.2">
<p>本主题描述在 Azure 应用服务和 IIS 上托管 ASP.NET Core 应用时的常见错误，并提供特定错误的故障排除建议。</p>
<p>有关一般故障排除指南，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
<p>收集以下信息：</p>
<ul>
<li>浏览器行为（状态代码和错误消息）</li>
<li>应用程序事件日志条目
<ul>
<li>Azure 应用服务：请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</li>
<li>IIS
<ol>
<li>选择 Windows 菜单中的“开始”，键入“事件查看器”，然后按 Enter 。</li>
<li>打开事件查看器后，展开侧栏中的“Windows 日志”&gt;“应用程序”  。</li>
</ol>
</li>
</ul>
</li>
<li>ASP.NET Core 模块 stdout 和 debug日志条目
<ul>
<li>Azure 应用服务：请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</li>
<li>IIS：按照 ASP.NET Core 模块主题的<a class="xref" href="aspnet-core-module.html#log-creation-and-redirection">日志创建和重定向</a>和<a class="xref" href="aspnet-core-module.html#enhanced-diagnostic-logs">增强的诊断日志</a>部分中的说明进行操作。</li>
</ul>
</li>
</ul>
<p>将错误信息与以下常见错误进行比较。 如果找到匹配项，请按照故障排除建议进行操作。</p>
<p>本主题中的错误列表并未包含所有错误。 如果遇到此处未列出的错误，请使用本主题底部的“内容反馈”按钮打开一个新问题，并提供有关如何重现错误的详细说明。</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p><strong>Azure 应用服务中的 ASP.NET Core 预览版</strong></p>
<p>默认情况下不会将 ASP.NET Core 预览版部署到 Azure 应用服务。 要托管使用 ASP.NET Core 预览版的应用，请参阅<a class="xref" href="azure-apps/index.html#deploy-aspnet-core-preview-release-to-azure-app-service">将 ASP.NET Core 预览版部署到 Azure 应用服务</a>。</p>
</div>
<!-- 
> [!IMPORTANT]
> **ASP.NET Core 3.0 with Azure App Service**
>
> ASP.NET Core 3.0 has not yet been deployed to Azure App Service. We hope to provide ASP.NET Core 3 on Azure App Service soon. To host an app that uses an ASP.NET Core 3.0:

* Treat ASP.NET Core 3.0 like a preview release for Azure App Service deployment.
* See [Deploy ASP.NET Core preview release to Azure App Service](xref:host-and-deploy/azure-apps/index#deploy-aspnet-core-preview-release-to-azure-app-service).
-->
<h2 id="os-upgrade-removed-the-32-bit-aspnet-core-module">OS 升级删除了 32 位 ASP.NET Core 模块</h2>
<p><strong>应用程序日志：</strong> 未能加载模块 DLL C:\WINDOWS\system32\inetsrv\aspnetcore.dll。 该数据是个错误。</p>
<p>疑难解答：</p>
<p>OS 升级期间不会保留 C:\Windows\SysWOW64\inetsrv 目录中的非 OS 文件。 如果在 OS 升级前已安装 ASP.NET Core 模块，且随后在 OS 升级后在 32 位模式下运行任何应用池，则会遇到此问题。 在 OS 升级后修复 ASP.NET Core 模块。 请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。 运行安装程序时，选择“修复”。</p>
<h2 id="missing-site-extension-32-bit-x86-and-64-bit-x64-site-extensions-installed-or-wrong-process-bitness-set">缺少站点扩展、安装了 32 位 (x86) 和 64 位 (x64) 站点扩展，或设置了错误的进程位数</h2>
<p>适用于 Azure 应用服务托管的应用。</p>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.0 - ANCM 进程内处理程序加载失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 调用 hostfxr 以查找进程内请求处理程序失败，未找到任何本机依赖项。 找不到进程内请求处理程序。 调用 hostfxr 捕获的输出：无法找到任何兼容的框架版本。 找不到指定的框架“Microsoft.AspNetCore.App”、版本“{VERSION}-preview-*”。 未能启动应用程序“/LM/W3SVC/1416782824/ROOT”，ErrorCode“0x8000ffff”。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 无法找到任何兼容的框架版本。 找不到指定的框架“Microsoft.AspNetCore.App”、版本“{VERSION}-preview-*”。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>如果在预览运行时运行该应用，请安装 32 位 (x86) 或  64位 (x64) 站点扩展，以匹配应用的位数和应用的运行时版本。 请勿同时安装扩展或扩展的多个运行时版本。</p>
<ul>
<li>ASP.NET Core {RUNTIME VERSION} (x86) 运行时</li>
<li>ASP.NET Core {RUNTIME VERSION} (x64) 运行时</li>
</ul>
<p>重新启动应用。 等待几秒钟，以便应用重新启动。</p>
</li>
<li><p>如果在预览运行时运行应用，且同时安装了 32 位 (x86) 和 64 位 (x64) <a class="xref" href="azure-apps/index.html#install-the-preview-site-extension">站点扩展</a>，请卸载与应用的位数不匹配的站点扩展。 删除站点扩展之后，重新启动应用。 等待几秒钟，以便应用重新启动。</p>
</li>
<li><p>如果在预览运行时运行该应用，并且站点扩展的位数匹配应用的位数，请确认预览站点扩展的运行时版本匹配应用的运行时版本。</p>
</li>
<li><p>确认“应用程序设置”中的应用“平台”与应用的位数匹配。</p>
</li>
</ul>
<p>有关详细信息，请参阅 <a class="xref" href="azure-apps/index.html#install-the-preview-site-extension">将 ASP.NET Core 应用部署到 Azure 应用服务</a>。</p>
<h2 id="an-x86-app-is-deployed-but-the-app-pool-isnt-enabled-for-32-bit-apps">已部署 x86 应用，但 32 位应用未启用应用池</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.30 - ANCM 进程内启动失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 '{PATH}' 的应用程序 '/LM/W3SVC/5/ROOT' 遇到意外的托管异常，异常代码= '0xe0434352'。 请检查 stderr 日志以获取详细信息。 物理根路径为 '{PATH}' 的应用程序 '/LM/W3SVC/5/ROOT' 未能加载 clr 和托管应用程序。 CLR 工作线程提前退出</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 日志文件已创建，但为空。</p>
</li>
</ul>
<p>发布自包含应用时，SDK 会捕获此方案。 如果 RID 与平台目标（例如，<code>win10-x64</code> RID 与项目文件中的 <code>&lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;</code>）不匹配，则 SDK 会产生错误。</p>
<p>疑难解答：</p>
<p>对于依赖 x86 框架的部署 (<code>&lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;</code>)，请为 32 位应用启用 IIS 应用池。 在 IIS 管理器中，打开应用池的“高级设置”并将“启用 32 位应用程序”设置为 True  。</p>
<h2 id="platform-conflicts-with-rid">平台与 RID 冲突</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 502.5 - 进程失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 未能通过 '&quot;C:{PATH}{ASSEMBLY}.{exe|dll}&quot; ' 命令行启动进程，ErrorCode = '0x80004005 : ff。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未经处理的异常：System.BadImageFormatException：无法加载文件或程序集 '{ASSEMBLY}.dll'。 试图加载的程序的格式不正确。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>如果在升级应用和部署更新的程序集时，Azure 应用部署出现此异常，请从先前的部署中手动删除所有文件。 部署升级的应用时，延迟的不兼容程序集可能造成 <code>System.BadImageFormatException</code> 异常。</p>
</li>
</ul>
<h2 id="uri-endpoint-wrong-or-stopped-website">URI 终结点错误或网站已停止</h2>
<ul>
<li><p><strong>浏览器：</strong> ERR_CONNECTION_REFUSED --或者-- 无法连接</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认正在使用的应用的 URI 端点是否正确。 检查绑定。</p>
</li>
<li><p>确认 IIS 网站未处于“已停止”状态。</p>
</li>
</ul>
<h2 id="corewebengine-or-w3svc-server-features-disabled">已禁用 CoreWebEngine 或 W3SVC 服务器功能</h2>
<p><strong>OS 异常：</strong> 必须安装 IIS 7.0 CoreWebEngine 和 W3SVC 功能才能使用 ASP.NET Core 模块。</p>
<p>疑难解答：</p>
<p>确认启用了适当的角色和功能。 请参阅 <a class="xref" href="iis/index.html#iis-configuration">IIS 配置</a>。</p>
<h2 id="incorrect-website-physical-path-or-app-missing">网站物理路径不正确或缺少应用</h2>
<ul>
<li><p><strong>浏览器：</strong> 403 禁止访问 - 访问被拒绝 --或者-- 403.14 禁止访问 - Web 服务器被配置为不列出此目录的内容。</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>检查 IIS 网站的“基本设置”和物理应用文件夹。 确认应用所在的文件夹位于 IIS 网站的物理路径中。</p>
<h2 id="incorrect-role-aspnet-core-module-not-installed-or-incorrect-permissions">角色不正确、未安装 ASP.NET Core 模块或权限不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> 500.19 内部服务器错误 - 无法访问请求的页面，因为该页面的相关配置数据无效。 --或者-- 无法显示此页面</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认启用了适当的角色。 请参阅 <a class="xref" href="iis/index.html#iis-configuration">IIS 配置</a>。</p>
</li>
<li><p>打开“程序和功能”或“应用和功能”，然后确认是否安装了 Windows Server Hosting  。 如果已安装的程序列表中没有 Windows Server Hosting，请下载并安装 .NET Core 托管捆绑包。</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer">当前 .NET Core 托管捆绑包安装程序（直接下载）</a></p>
<p>有关详细信息，请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。</p>
</li>
<li><p>请确保将“应用程序池”&gt;“进程模型”&gt;“Identity”设置为“ApplicationPoolIdentity”，或确保自定义标识具有访问应用部署文件夹的相应权限   。</p>
</li>
<li><p>如果卸载了 ASP.NET Core 托管捆绑包并已安装了一个早期版本的托管捆绑包，则 applicationHost.config 文件将不包含 ASP.NET Core 模块分区。 可打开 %windir%/System32/inetsrv/config 处的 applicationHost.config 文件并找到 <code>&lt;configuration&gt;&lt;configSections&gt;&lt;sectionGroup name=&quot;system.webServer&quot;&gt;</code> 分区组 。 如果分区组中缺少 ASP.NET Core 模块分区，请添加以下分区元素：</p>
<pre><code class="lang-xml">&lt;section name=&quot;aspNetCore&quot; overrideModeDefault=&quot;Allow&quot; /&gt;
</code></pre>
<p>或者，安装最新版本的 ASP.NET Core 托管捆绑包。 最新版本与受支持的 ASP.NET Core 应用向后兼容。</p>
</li>
</ul>
<h2 id="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation">processPath 不正确、缺少 PATH 变量、未安装托管捆绑包、未重启系统/IIS、未安装 VC++ Redistributable 或 dotnet.exe 访问冲突</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 502.5 - 进程失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 未能通过 '&quot;{...}&quot; ' 命令行启动进程 ，ErrorCode = '0x80070002 :0.</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 日志文件已创建，但为空。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>检查 web.config 中 <code>&lt;aspNetCore&gt;</code> 元素的 processPath 属性，对于依赖框架的部署 (FDD)，确保它为 <code>dotnet</code>，对于<a href="/dotnet/core/deploying/#self-contained-deployments-scd">独立部署 (SCD)</a>，确保它为 <code>.\{ASSEMBLY}.exe</code> 。</p>
</li>
<li><p>对于 FDD，可能无法通过路径设置访问 dotnet.exe。 确认“系统路径”设置中存在“C:\Program Files\dotnet”\。</p>
</li>
<li><p>对于 FDD，应用池的用户标识可能无法访问 dotnet.exe。 确认应用池用户标识具有访问 C:\Program Files\dotnet 目录的权限。 确认没有为应用池用户标识配置针对 C:\Program Files\dotnet 和应用目录的拒绝规则。</p>
</li>
<li><p>可能已部署 FDD 并安装了 .NET Core，但未重启 IIS。 重启服务器，或通过从命令提示符依次执行 net stop was /y 和 net start w3svc 来重启 IIS 。</p>
</li>
<li><p>可能已部署 FDD，但未在托管系统上安装 .NET Core 运行时。 如果尚未安装 .NET Core 运行时，则运行系统上的 <strong>.NET Core 托管捆绑包安装程序</strong>。</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer">当前 .NET Core 托管捆绑包安装程序（直接下载）</a></p>
<p>有关详细信息，请参阅<a class="xref" href="iis/index.html#install-the-net-core-hosting-bundle">安装 .NET Core 托管捆绑包</a>。</p>
<p>如果需要特定的运行时，请从 <a href="https://dotnet.microsoft.com/download/archives">.NET 下载存档</a>下载运行时并将其安装在系统上。 重启系统，或通过从命令提示符依次执行 net stop was /y 和 net start w3svc 来重启 IIS，完成安装 。</p>
</li>
</ul>
<h2 id="incorrect-arguments-of-aspnetcore-element">&lt;aspNetCore&gt; 元素的参数不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 502.5 - 进程失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 未能通过 '&quot;dotnet&quot; .{ASSEMBLY}.dll' 命令行启动进程，ErrorCode = '0x80004005 :80008081。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 要执行的应用程序不存在：'PATH{ASSEMBLY}.dll'</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>确认应用在 Kestrel 上本地运行。 进程失败可能是由应用的内部问题导致的。 有关详细信息，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
</li>
<li><p>检查 web.config 中 <code>&lt;aspNetCore&gt;</code> 元素的 arguments 属性，确认该属性：(a) 对于依赖框架的部署 (FDD) 为 <code>.\{ASSEMBLY}.dll</code>；或 (b) 对于独立部署 (SCD)，则为不存在、为空字符串 (<code>arguments=&quot;&quot;</code>)，或为应用参数列表 (<code>arguments=&quot;{ARGUMENT_1}, {ARGUMENT_2}, ... {ARGUMENT_X}&quot;</code>) 。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>对于依赖框架的部署 (FDD)，确认已在系统上安装正确的运行时。</p>
<h2 id="stopped-application-pool">应用程序池已停止</h2>
<ul>
<li><p><strong>浏览器：</strong> 503 服务不可用</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>确认应用程序池未处于“已停止”状态。</p>
<h2 id="sub-application-includes-a-handlers-section">子应用程序包括 &lt;handlers&gt; 部分</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 500.19 - 内部服务器错误</p>
</li>
<li><p><strong>应用程序日志：</strong> 没有条目</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 创建根应用的日志文件并显示正常操作。 未创建子应用的日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>确认子应用的 web.config 文件不包括 <code>&lt;handlers&gt;</code> 部分。</p>
<h2 id="stdout-log-path-incorrect">stdout 日志路径不正确</h2>
<ul>
<li><p><strong>浏览器：</strong> 应用正常响应。</p>
</li>
<li><p><strong>应用程序日志：</strong> 警告：无法创建 stdoutLogFile \?{PATH}\path_doesnt_exist\stdout_{PROCESS ID}_{TIMESTAMP}.log，ErrorCode = -2147024893。</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 未创建日志文件。</p>
</li>
</ul>
<p>疑难解答：</p>
<ul>
<li><p>web.config 的 <code>&lt;aspNetCore&gt;</code> 元素中指定的 <code>stdoutLogFile</code> 路径不存在。 有关详细信息，请参阅 <a class="xref" href="aspnet-core-module.html#log-creation-and-redirection">ASP.NET Core 模块：日志创建和重定向</a>。</p>
</li>
<li><p>应用池用户没有 stdout 日志路径的写入权限。</p>
</li>
</ul>
<h2 id="application-configuration-general-issue">应用程序配置常见问题</h2>
<ul>
<li><p><strong>浏览器：</strong> HTTP 错误 502.5 - 进程失败</p>
</li>
<li><p><strong>应用程序日志：</strong> 物理根路径为 'C:{PATH}' 的应用程序 'MACHINE/WEBROOT/APPHOST/{ASSEMBLY}' 通过 '&quot;C:{PATH}{ASSEMBLY}.{exe|dll}&quot; ' 命令行创建了进程，但该进程出现故障、未响应或未在给定的端口 '{PORT}' 上侦听，ErrorCode = '{ERROR CODE}'</p>
</li>
<li><p><strong>ASP.NET Core 模块 stdout 日志：</strong> 日志文件已创建，但为空。</p>
</li>
</ul>
<p>疑难解答：</p>
<p>此进程无法启动，这很可能是由应用配置或编程问题引起的。</p>
<p>有关详细信息，请参阅下列主题：</p>
<ul>
<li><a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a></li>
<li><a class="xref" href="../test/troubleshoot.html">ASP.NET Core 项目故障排除和调试</a></li>
</ul>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
