<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ASP.NET Core 3.1 &#30340;&#26032;&#22686;&#21151;&#33021; </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ASP.NET Core 3.1 &#30340;&#26032;&#22686;&#21151;&#33021; ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="aspnetcore-3.1">
<h1 id="whats-new-in-aspnet-core-31">ASP.NET Core 3.1 的新增功能</h1>

<p>本文重点介绍 ASP.NET Core 3.1 中最重要的更改，并提供相关文档的链接。</p>
<h2 id="partial-class-support-for-no-locrazor-components">Razor 组件的分部类支持</h2>
<p>Razor 组件现作为分部类生成。 可使用定义为分部类的代码隐藏文件来编写 Razor 组件的代码，而不是在单个文件中定义该组件的所有代码。 有关详细信息，请参阅<a class="xref" href="../blazor/components/index.html#partial-class-support">分部类支持</a>。</p>
<h2 id="no-locblazor-component-tag-helper-and-pass-parameters-to-top-level-components">Blazor 组件标记帮助程序和将参数传递到顶级组件</h2>
<p>在 ASP.NET Core 3.0 的 Blazor 中，使用 HTML 帮助程序 (<code>Html.RenderComponentAsync</code>) 将组件呈现到页面和视图中。 在 ASP.NET Core 3.1 中，使用新的组件标记帮助程序从页面或视图呈现组件：</p>
<pre><code class="lang-cshtml">&lt;component type=&quot;typeof(Counter)&quot; render-mode=&quot;ServerPrerendered&quot; /&gt;
</code></pre>
<p>HTML 帮助程序在 ASP.NET Core 3.1 仍受支持，但建议使用组件标记帮助程序。</p>
<p>Blazor Server 应用现可在初始呈现期间将参数传递给顶级组件。 之前，你只能将参数传递给具有 <a href="xref:Microsoft.AspNetCore.Mvc.Rendering.RenderMode.Static">RenderMode.Static</a> 的顶级组件。 在此版本中，<a href="xref:Microsoft.AspNetCore.Mvc.Rendering.RenderMode.Server">RenderMode.Server</a> 和 <a href="xref:Microsoft.AspNetCore.Mvc.Rendering.RenderMode.ServerPrerendered">RenderMode.ServerPrerendered</a> 均受支持。 任何指定的参数值均序列化为 JSON，并包含在初始响应中。</p>
<p>例如，通过增量 (<code>IncrementAmount</code>) 预呈现一个 <code>Counter</code> 组件：</p>
<pre><code class="lang-cshtml">&lt;component type=&quot;typeof(Counter)&quot; render-mode=&quot;ServerPrerendered&quot; 
    param-IncrementAmount=&quot;10&quot; /&gt;
</code></pre>
<p>有关详细信息，请参阅<a class="xref" href="../blazor/components/integrate-components.html">将组件集成到 Razor Pages 和 MVC 应用</a>。</p>
<h2 id="support-for-shared-queues-in-httpsys">HTTP.sys 中对共享队列的支持</h2>
<p><a class="xref" href="../fundamentals/servers/httpsys.html">HTTP.sys</a> 支持创建匿名请求队列。 在 ASP.NET Core 3.1 中，我们添加了创建 HTTP.sys 请求队列或附加到现有 HTTP.sys 请求队列的功能。 通过创建名为 HTTP.sys 的请求队列或附加到现有 HTTP.sys 请求队列，可实现拥有该队列的 HTTP.sys 控制器进程独立于侦听器进程这一场景。 利用这种独立性，可在侦听器进程重启期间保留现有的连接和排队的请求：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h2 id="breaking-changes-for-samesite-no-loccookies">SameSite cookie 的中断性变更</h2>
<p>SameSite cookie 的行为已更改，可反映出即将发生的浏览器更改。 这可能会影响 AzureAd、OpenIdConnect 或 WsFederation 等身份验证场景。 有关详细信息，请参阅 <a class="xref" href="../security/samesite.html">使用 cookie ASP.NET Core 中的 SameSite</a>。</p>
<h2 id="prevent-default-actions-for-events-in-no-locblazor-apps">在 Blazor 应用中阻止事件的默认操作</h2>
<p>使用 <code>@on{EVENT}:preventDefault</code> 指令属性可阻止事件的默认操作。 在下例中，阻止在文本框中显示键字符的默认操作：</p>
<pre><code class="lang-razor">&lt;input value=&quot;@_count&quot; @onkeypress=&quot;KeyHandler&quot; @onkeypress:preventDefault /&gt;
</code></pre>
<p>有关详细信息，请参阅<a class="xref" href="../blazor/components/event-handling.html#prevent-default-actions">阻止默认操作</a>。</p>
<h2 id="stop-event-propagation-in-no-locblazor-apps">在 Blazor 应用中停止事件传播</h2>
<p>使用 <code>@on{EVENT}:stopPropagation</code> 指令属性来停止事件传播。 在下例中，选中复选框可阻止子 <code>&lt;div&gt;</code> 中的单击事件传播到父 <code>&lt;div&gt;</code>：</p>
<pre><code class="lang-razor">&lt;input @bind=&quot;_stopPropagation&quot; type=&quot;checkbox&quot; /&gt;

&lt;div @onclick=&quot;OnSelectParentDiv&quot;&gt;
    &lt;div @onclick=&quot;OnSelectChildDiv&quot; @onclick:stopPropagation=&quot;_stopPropagation&quot;&gt;
        ...
    &lt;/div&gt;
&lt;/div&gt;

@code {
    private bool _stopPropagation = false;
}
</code></pre>
<p>有关详细信息，请参阅<a class="xref" href="../blazor/components/event-handling.html#stop-event-propagation">停止事件传播</a>。</p>
<h2 id="detailed-errors-during-no-locblazor-app-development">Blazor 应用开发过程中的错误详细信息</h2>
<p>当 Blazor 应用在开发过程中运行不正常时，从该应用接收详细的错误信息有助于故障排除和修复问题。 出现错误时，Blazor 应用会在屏幕底部显示一个黄色条框：</p>
<ul>
<li>在开发过程中，黄色条框会将你定向到浏览器控制台，你可在其中查看异常。</li>
<li>在生产过程中，黄色条框会通知用户发生了错误，并建议刷新浏览器。</li>
</ul>
<p>有关详细信息，请参阅<a class="xref" href="../blazor/fundamentals/handle-errors.html#detailed-errors-during-development">开发过程中的错误详细信息</a>。</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
