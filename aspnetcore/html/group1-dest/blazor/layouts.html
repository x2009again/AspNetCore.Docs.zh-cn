<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ASP.NET Core Blazor &#24067;&#23616; </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ASP.NET Core Blazor &#24067;&#23616; ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="blazor/layouts">
<h1 id="aspnet-core-no-locblazor-layouts">ASP.NET Core Blazor 布局</h1>

<p>作者：<a href="https://www.timecockpit.com">Rainer Stropek</a> 和 <a href="https://github.com/guardrex">Luke Latham</a></p>
<p>有些应用元素（例如菜单、版权消息和公司徽标）通常是应用整体布局的一部分，并被应用中的每个组件使用。 将这些元素的代码复制到应用的所有组件并不是一种有效的方法。 每当一个元素需要更新时，每个组件都必须更新。 此类复制难以维护，并会随时间推移导致内容不一致。 <em>布局</em>可解决此问题。</p>
<p>从技术上讲，布局也是一个组件。 布局在 Razor 模板或 C# 代码中定义，并可使用<a class="xref" href="components/data-binding.html">数据绑定</a>、<a class="xref" href="fundamentals/dependency-injection.html">依赖项注入</a>和其他组件方案。</p>
<p>若要将<em>组件</em>转换为<em>布局</em>，该组件应：</p>
<ul>
<li>继承自 &lt;xref:Microsoft.AspNetCore.Components.LayoutComponentBase&gt;，后者为布局内的呈现内容定义 &lt;xref:Microsoft.AspNetCore.Components.LayoutComponentBase.Body&gt; 属性。</li>
<li>使用 Razor 语法 <code>@Body</code> 在布局标记中指定呈现内容的位置。</li>
</ul>
<p>以下代码示例显示布局组件 <code>MainLayout.razor</code> 的 Razor 模板。 布局继承 &lt;xref:Microsoft.AspNetCore.Components.LayoutComponentBase&gt; 并在导航栏和页脚之间设置 <code>@Body</code>：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h2 id="mainlayout-component"><code>MainLayout</code> 组件</h2>
<p>在基于其中一个 Blazor 项目模板的应用中，<code>MainLayout</code> 组件 (<code>MainLayout.razor</code>) 位于应用的“<code>Shared</code>”文件夹中：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h2 id="default-layout">默认布局</h2>
<p>在应用的 <code>App.razor</code> 文件的 &lt;xref:Microsoft.AspNetCore.Components.Routing.Router&gt; 组件中指定默认应用布局。 默认 Blazor 模板提供的以下 &lt;xref:Microsoft.AspNetCore.Components.Routing.Router&gt; 组件将默认布局设置为 <code>MainLayout</code> 组件：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>若要为 &lt;xref:Microsoft.AspNetCore.Components.Routing.Router.NotFound&gt; 内容提供默认布局，请为 &lt;xref:Microsoft.AspNetCore.Components.Routing.Router.NotFound&gt; 内容指定 &lt;xref:Microsoft.AspNetCore.Components.LayoutView&gt;：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>有关 &lt;xref:Microsoft.AspNetCore.Components.Routing.Router&gt; 组件的详细信息，请参阅 <a class="xref" href="fundamentals/routing.html">ASP.NET Core Blazor 路由</a>。</p>
<p>在路由器中将布局指定为默认布局是一种有用的做法，因为可以按组件或按文件夹进行替代。 最好使用路由器来设置应用的默认布局，因为这是最常规的方法。</p>
<h2 id="specify-a-layout-in-a-component">在组件中指定布局</h2>
<p>使用 Razor 指令 <code>@layout</code> 将布局应用于组件。 编译器将 <code>@layout</code> 转换为 &lt;xref:Microsoft.AspNetCore.Components.LayoutAttribute&gt;，后者应用于组件类。</p>
<p>以下 <code>MasterList</code> 组件的内容插入到 <code>MasterLayout</code> 中 <code>@Body</code> 的位置：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>直接在组件中指定布局会替代路由器中设置的默认布局或从 <code>_Imports.razor</code> 导入的 <code>@layout</code> 指令。</p>
<h2 id="centralized-layout-selection">集中式布局选择</h2>
<p>应用的每个文件夹都可以选择包含名为 <code>_Imports.razor</code> 的模板文件。 编译器将导入文件中指定的指令包括在同一文件夹中的所有 Razor 模板内，并在其所有子文件夹中以递归方式包括。 因此，包含 <code>@layout MyCoolLayout</code> 的 <code>_Imports.razor</code> 文件可确保文件夹中的所有组件都使用 <code>MyCoolLayout</code>。 无需将 <code>@layout MyCoolLayout</code> 重复添加到文件夹和子文件夹内的所有 <code>.razor</code> 文件。 <code>@using</code> 指令也以相同的方式应用于组件。</p>
<p>添加以下 <code>_Imports.razor</code> 文件导入内容：</p>
<ul>
<li><code>MyCoolLayout</code>。</li>
<li>同一文件夹以及任何子文件夹中的所有 Razor 组件。</li>
<li><code>BlazorApp1.Data</code> 命名空间。</li>
</ul>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><code>_Imports.razor</code> 文件类似于 <a class="xref" href="../mvc/views/layout.html#importing-shared-directives">Razor 视图和页面的 _ViewImports.cshtml 文件</a>，但专门应用于 Razor 组件文件。</p>
<p>在 <code>_Imports.razor</code> 中指定布局会替代指定为路由器默认布局的布局。</p>
<div class="WARNING">
<h5>Warning</h5>
<p>请勿向根 <code>_Imports.razor</code> 文件添加 Razor <code>@layout</code> 指令，这会导致应用中的布局形成无限循环。 请在 <code>Router</code> 组件中指定布局，以控制默认应用布局。 有关详细信息，请参阅<a href="#default-layout">默认布局</a>部分。</p>
</div>
<h2 id="nested-layouts">嵌套布局</h2>
<p>应用可以包含嵌套布局。 组件可以引用一个布局，该布局反过来引用另一个布局。 例如，嵌套布局用于创建多级菜单结构。</p>
<p>以下示例演示如何使用嵌套布局。 <code>EpisodesComponent.razor</code> 文件是要显示的组件。 该组件引用 <code>MasterListLayout</code>：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p><code>MasterListLayout.razor</code> 文件提供 <code>MasterListLayout</code>。 该布局引用另一个布局 <code>MasterLayout</code> 并在其中呈现。 <code>EpisodesComponent</code> 在显示 <code>@Body</code> 的位置呈现：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div>
<p>最后，<code>MasterLayout.razor</code> 中的 <code>MasterLayout</code> 包含顶级布局元素，例如页眉、主菜单和页脚。 具有 <code>EpisodesComponent</code> 的 <code>MasterListLayout</code> 在 <code>@Body</code> 显示的位置呈现：</p>
<div class="WARNING">
<h5>Warning</h5>
<p>It looks like the sample you are looking for does not exist.</p>
</div><h2 id="share-a-no-locrazor-pages-layout-with-integrated-components">与集成组件共享 Razor Pages 布局</h2>
<p>当可路由组件集成到 Razor Pages 应用中时，该应用的共享布局可与这些组件配合使用。 有关详细信息，请参阅 <a class="xref" href="components/integrate-components.html">将 ASP.NET Core Razor 组件集成到 Razor Pages 和 MVC 应用</a>。</p>
<h2 id="additional-resources">其他资源</h2>
<ul>
<li><a class="xref" href="../mvc/views/layout.html">ASP.NET Core 中的布局</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
