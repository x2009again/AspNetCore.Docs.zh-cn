<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#20351;&#29992; Visual Studio Code &#23558; ASP.NET Core &#24212;&#29992;&#21457;&#24067;&#21040; Azure </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#20351;&#29992; Visual Studio Code &#23558; ASP.NET Core &#24212;&#29992;&#21457;&#24067;&#21040; Azure ">
    <meta name="generator" content="docfx 2.56.4.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="tutorials/publish-to-azure-webapp-using-vscode">
<h1 id="publish-an-aspnet-core-app-to-azure-with-visual-studio-code">使用 Visual Studio Code 将 ASP.NET Core 应用发布到 Azure</h1>

<p>作者：<a href="https://twitter.com/ricardoserradas">Ricardo Serradas</a></p>
<div class="IMPORTANT">
<h5>Important</h5>
<p><strong>Azure 应用服务中的 ASP.NET Core 预览版</strong></p>
<p>默认情况下不会将 ASP.NET Core 预览版部署到 Azure 应用服务。 要托管使用 ASP.NET Core 预览版的应用，请参阅<a class="xref" href="../host-and-deploy/azure-apps/index.html#deploy-aspnet-core-preview-release-to-azure-app-service">将 ASP.NET Core 预览版部署到 Azure 应用服务</a>。</p>
</div>
<!-- 
> [!IMPORTANT]
> **ASP.NET Core 3.0 with Azure App Service**
>
> ASP.NET Core 3.0 has not yet been deployed to Azure App Service. We hope to provide ASP.NET Core 3 on Azure App Service soon. To host an app that uses an ASP.NET Core 3.0:

* Treat ASP.NET Core 3.0 like a preview release for Azure App Service deployment.
* See [Deploy ASP.NET Core preview release to Azure App Service](xref:host-and-deploy/azure-apps/index#deploy-aspnet-core-preview-release-to-azure-app-service).
-->

<p>若要对应用服务部署问题进行故障排除，请参阅 <a class="xref" href="../test/troubleshoot-azure-iis.html">对 Azure 应用服务和 IIS 上的 ASP.NET Core 进行故障排除</a>。</p>
<h2 id="intro">简介</h2>
<p>借助此教程，可了解如何创建 ASP.Net Core MVC 应用程序并在 Visual Studio Code 中部署。</p>
<h2 id="set-up">设置</h2>
<ul>
<li>如果没有<a href="https://azure.microsoft.com/free/dotnet/">免费 Azure 帐户</a>，请开设一个。</li>
<li>安装 <a href="https://dotnet.microsoft.com/download">.NET Core SDK</a></li>
<li>安装 <a href="https://code.visualstudio.com/Download">Visual Studio Code</a>
<ul>
<li>将 <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp">C# 扩展</a>安装到 Visual Studio Code</li>
<li>将 <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azureappservice">Azure 应用服务扩展</a>安装到 Visual Studio Code 并在继续操作之前对其进行配置</li>
</ul>
</li>
</ul>
<h2 id="create-an-aspnet-core-mvc-project">创建 ASP.NET Core MVC 项目</h2>
<p>使用终端导航到要在其中创建项目的文件夹，然后使用以下命令：</p>
<pre><code class="lang-dotnetcli">dotnet new mvc
</code></pre>
<p>将生成类似于以下的文件夹结构：</p>
<pre><code class="lang-cmd">      appsettings.Development.json
      appsettings.json
&lt;DIR&gt; Controllers
&lt;DIR&gt; Models
      netcore-vscode.csproj
&lt;DIR&gt; obj
      Program.cs
&lt;DIR&gt; Properties
      Startup.cs
&lt;DIR&gt; Views
&lt;DIR&gt; wwwroot
</code></pre>
<h2 id="open-it-with-visual-studio-code">使用 Visual Studio Code 打开</h2>
<p>创建项目后，可使用以下选项之一通过 Visual Studio Code 将其打开：</p>
<h3 id="through-the-command-line">通过命令行</h3>
<p>在创建项目的文件夹中使用以下命令：</p>
<pre><code class="lang-cmd">&gt; code .
</code></pre>
<p>如果以下命令不起作用，请参考<a href="https://code.visualstudio.com/docs/setup/setup-overview#_cross-platform">此链接</a>，检查安装是否配置正确。</p>
<h3 id="through-visual-studio-code-interface">通过 Visual Studio Code 接口</h3>
<ul>
<li>打开 Visual Studio Code</li>
<li>在菜单上，选择 <code>File &gt; Open Folder</code></li>
<li>选择创建 MVC 项目的文件夹的根目录</li>
</ul>
<p>打开项目文件夹后，会收到消息，告知生成和调试所需的资产丢失。 接受帮助以添加资产。</p>
<p><img src="publish-to-azure-webapp-using-vscode/_static/folder-structure-restore-netcore.jpg" alt="加载了项目的 Visual Studio Code 接口"></p>
<p>将在项目结构下创建 <code>.vscode</code> 文件夹。 它将包含以下文件：</p>
<pre><code class="lang-cmd">launch.json
tasks.json
</code></pre>
<p>这些实用程序软件可帮助生成和调试 .NET Core Web 应用。</p>
<h2 id="run-the-app">运行应用</h2>
<p>将应用部署到 Azure 之前，请确保它在本地计算机上正常运行。</p>
<ul>
<li>按 F5 运行项目</li>
</ul>
<p>Web 应用将在默认浏览器的新选项卡上开始运行。 它刚启动时可能会显示一个隐私问题警告。 这是因为将使用 HTTP 或 HTTPS 启动应用，会默认导航到 HTTPS 终结点。</p>
<p><img src="publish-to-azure-webapp-using-vscode/_static/run-webapp-https-warning.jpg" alt="本地调试应用时显示的隐私问题警告"></p>
<p>若要保持调试会话，请单击 <code>Advanced</code> 然后单击 <code>Continue to localhost (unsafe)</code>。</p>
<h2 id="generate-the-deployment-package-locally">本地生成部署包</h2>
<ul>
<li>打开 Visual Studio Code 终端</li>
<li>使用以下命令将 <code>Release</code> 包生成到名为 <code>publish</code> 的子文件夹中：
<ul>
<li><code>dotnet publish -c Release -o ./publish</code></li>
</ul>
</li>
<li>将在项目结构下创建新的 <code>publish</code> 文件夹</li>
</ul>
<p><img src="publish-to-azure-webapp-using-vscode/_static/publish-folder.jpg" alt="发布文件夹结构"></p>
<h2 id="publish-to-azure-app-service">发布到 Azure 应用服务</h2>
<p>利用适用于 Visual Studio Code 的 Azure 应用服务扩展，按照以下步骤直接将网站发布到 Azure 应用服务。</p>
<h3 id="if-youre-creating-a-new-web-app">如果要创建新的 Web 应用</h3>
<ul>
<li>请右键单击 <code>publish</code> 文件夹，然后选择 <code>Deploy to Web App...</code></li>
<li>选择要创建 Web 应用的订阅</li>
<li>选择 <code>Create New Web App</code></li>
<li>输入 Web 应用的名称</li>
</ul>
<p>此扩展将创建新的 Web 应用，然后自动开始将包部署到该 Web 应用。 完成部署后，请单击 <code>Browse Website</code> 以验证部署。</p>
<p><img src="publish-to-azure-webapp-using-vscode/_static/deployment-succeeded-message.jpg" alt="部署成功的消息"></p>
<p>单击 <code>Browse Website</code> 后，将使用默认浏览器导航到此网站：</p>
<p><img src="publish-to-azure-webapp-using-vscode/_static/new-webapp-deployed.jpg" alt="已成功部署新的 Web 应用"></p>
<h3 id="if-youre-deploying-to-an-existing-web-app">如果要部署到现有 Web 应用</h3>
<ul>
<li>请右键单击 <code>publish</code> 文件夹，然后选择 <code>Deploy to Web App...</code></li>
<li>选择现有 Web 应用所在的订阅</li>
<li>从列表中选择 Web 应用</li>
<li>Visual Studio Code 将询问是否要覆盖现有内容。 单击 <code>Deploy</code> 以确认</li>
</ul>
<p>该扩展将更新的内容部署到 Web 应用。 完成后，单击 <code>Browse Website</code> 以验证部署。</p>
<p><img src="publish-to-azure-webapp-using-vscode/_static/existing-webapp-deployed.jpg" alt="已成功部署现有 Web 应用"></p>
<h2 id="next-steps">后续步骤</h2>
<ul>
<li><a href="/azure/devops/pipelines/create-first-pipeline">创建首个 Azure DevOps 管道</a></li>
</ul>
<h2 id="additional-resources">其他资源</h2>
<ul>
<li><a href="/azure/app-service/app-service-web-overview">Azure 应用服务</a></li>
<li><a href="/azure/azure-resource-manager/resource-group-overview#resource-groups">Azure 资源组</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
